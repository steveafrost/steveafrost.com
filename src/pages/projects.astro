---
import MainLayout from '../layouts/MainLayout.astro';

const LANGUAGE_STYLES: Record<string, { dot: string; bg: string }> = {
  TypeScript:  { dot: 'bg-blue-400',    bg: 'from-blue-400/10 to-blue-600/5' },
  JavaScript:  { dot: 'bg-yellow-400',  bg: 'from-yellow-400/10 to-yellow-600/5' },
  Ruby:        { dot: 'bg-red-400',     bg: 'from-red-400/10 to-red-600/5' },
  Python:      { dot: 'bg-emerald-400', bg: 'from-emerald-400/10 to-emerald-600/5' },
  Shell:       { dot: 'bg-lime-400',    bg: 'from-lime-400/10 to-lime-600/5' },
  HTML:        { dot: 'bg-orange-400',  bg: 'from-orange-400/10 to-orange-600/5' },
  CSS:         { dot: 'bg-purple-400',  bg: 'from-purple-400/10 to-purple-600/5' },
  Liquid:      { dot: 'bg-teal-400',    bg: 'from-teal-400/10 to-teal-600/5' },
  'Next.js':   { dot: 'bg-ctp-subtext1',    bg: 'from-ctp-subtext1/10 to-ctp-overlay1/5' },
  Shopify:     { dot: 'bg-green-400',   bg: 'from-green-400/10 to-green-600/5' },
  Middleman:   { dot: 'bg-rose-400',    bg: 'from-rose-400/10 to-rose-600/5' },
} as const;

const CARD_ACCENTS = [
  'hover:border-coral-400/30',
  'hover:border-coral-300/30',
  'hover:border-amber-500/30',
  'hover:border-coral-500/30',
  'hover:border-coral-200/30',
  'hover:border-amber-400/30',
  'hover:border-coral-400/30',
  'hover:border-coral-300/30',
  'hover:border-amber-500/30',
] as const;

interface Project {
  readonly slug: string;
  readonly name: string;
  readonly description: string;
  readonly language: string;
  readonly tech: readonly string[];
  readonly github?: string;
  readonly mockUrl: string;
  readonly role: string;
}

const projects: readonly Project[] = [
  {
    slug: 'message-relay',
    name: 'Message Relay',
    description: 'Node.js webhook server that bridges HTTP POST requests to iMessage via macOS AppleScript. Supports group messaging, health monitoring, and launchd auto-start.',
    language: 'JavaScript',
    tech: ['Node.js', 'Express', 'AppleScript', 'launchd'],
    github: 'https://github.com/steveafrost/message-relay',
    mockUrl: '/projects/mock/message-relay',
    role: 'Solo Developer',
  },
  {
    slug: 'leon-bridges',
    name: 'Leon Bridges',
    description: 'Official artist website for Grammy-winning R&B/soul artist Leon Bridges. Split-panel layout with full-viewport hero, discography, tour dates via Seated widget, and merch integration.',
    language: 'HTML',
    tech: ['HTML', 'CSS', 'jQuery', 'Seated Widget', 'Columbia Records'],
    mockUrl: '/projects/mock/leon-bridges',
    role: 'Lead Developer',
  },
  {
    slug: 'phillips-nyc',
    name: 'Phillips NYC',
    description: 'Custom Shopify theme for a NYC-based fashion retailer. Bespoke design with product collections, announcement bars, and optimized checkout.',
    language: 'Shopify',
    tech: ['Shopify', 'Liquid', 'CSS', 'JavaScript'],
    mockUrl: '/projects/mock/phillips-nyc',
    role: 'Theme Developer',
  },
  {
    slug: 'caamp',
    name: 'CAAMP',
    description: 'Band portfolio and tour site for indie folk group CAAMP. Minimalist design with tour date management, album showcases, and merch store.',
    language: 'Next.js',
    tech: ['Next.js', 'Headless CMS', 'E-commerce'],
    mockUrl: '/projects/mock/caamp',
    role: 'Lead Developer',
  },
  {
    slug: 'drew-aichele',
    name: 'Drew Aichele — Food Stylist',
    description: 'Portfolio website for NYC food stylist Drew Aichele. Dark sidebar navigation with masonry photo grid showcasing editorial and commercial food styling work.',
    language: 'TypeScript',
    tech: ['Next.js', 'Tailwind CSS', 'Masonry Grid', 'Vercel'],
    mockUrl: '/projects/mock/drew-aichele',
    role: 'Solo Developer',
  },
  {
    slug: 'sesame-street-live',
    name: 'Sesame Street Live',
    description: 'Tour website for Sesame Street Live theatrical show. Vibrant animated hero, show date listings, newsletter signup, and FAQ — built with Next.js and custom Sesame Workshop branding.',
    language: 'Next.js',
    tech: ['Next.js', 'Tailwind CSS', 'Headless CMS', 'Vercel'],
    mockUrl: '/projects/mock/sesame-street-live',
    role: 'Lead Developer',
  },
  {
    slug: 'tip-track',
    name: 'Tip Track',
    description: 'Next.js PWA for Shipt delivery drivers to track orders, record tips by address, and view earning reports with interactive charts.',
    language: 'TypeScript',
    tech: ['Next.js', 'Tailwind CSS', 'Prisma', 'Clerk Auth', 'PWA'],
    github: 'https://github.com/steveafrost/tip-track',
    mockUrl: '/projects/mock/tip-track',
    role: 'Solo Developer',
  },
  {
    slug: 'cocomelon',
    name: 'Cocomelon On Tour',
    description: 'Official tour website for the Cocomelon Live theatrical show. Dynamic show listings with geolocation-based nearby shows, newsletter signup with age gate, and CMS-driven content.',
    language: 'Next.js',
    tech: ['Next.js', 'Tailwind CSS', 'Headless CMS', 'Vercel'],
    mockUrl: '/projects/mock/cocomelon',
    role: 'Lead Developer',
  },
  {
    slug: 'the-ride-bus-schedule',
    name: 'TheRide Bus Schedule',
    description: 'TRMNL e-ink display recipe showing real-time bus departures for TheRide in Ann Arbor, MI. Built with Liquid templating and the TRMNL API.',
    language: 'Liquid',
    tech: ['Liquid', 'TRMNL', 'API Integration'],
    github: 'https://github.com/steveafrost/the-ride-bus-schedule-trmnl',
    mockUrl: '/projects/mock/the-ride-bus-schedule',
    role: 'Solo Developer',
  },
] as const;
---

<MainLayout title="Projects | Steve Frost" description="Selected projects by Steve Frost.">
  <section class="pb-8">
    <h1 class="mb-8 text-3xl font-extrabold tracking-tight sm:text-4xl">
      <span class="relative inline-block">
        <span class="text-gradient">projects</span>
        <svg class="absolute -bottom-3 left-0 w-full text-coral-400/40" viewBox="0 0 100 10" fill="none" preserveAspectRatio="none" aria-hidden="true">
          <path d="M0 5c8.33-6 16.67 6 25 0s16.67 6 25 0 16.67 6 25 0 16.67 6 25 0" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
        </svg>
      </span>
    </h1>
    <p class="mb-12 max-w-2xl text-ctp-subtext0">
      Selected work spanning tour websites, e-commerce, developer tools, and personal projects.
    </p>

    <div class="grid gap-4 sm:grid-cols-2">
      {projects.map((project, i) => {
        const langStyle = LANGUAGE_STYLES[project.language] ?? { dot: 'bg-ctp-overlay1', bg: 'from-ctp-subtext0/5 to-ctp-overlay0/5' };
        const accent = CARD_ACCENTS[i % CARD_ACCENTS.length];

        return (
          <article
            class:list={[
              'card-glow group relative flex flex-col overflow-hidden rounded-2xl border border-white/5 bg-ctp-surface0/60 p-6 backdrop-blur transition-all duration-300 hover:scale-[1.02]',
              accent,
            ]}
            style={`animation: slideUp 0.5s ease-out ${i * 80}ms both;`}
          >
            <div class={`pointer-events-none absolute inset-0 bg-gradient-to-br ${langStyle.bg} opacity-0 transition-opacity group-hover:opacity-100`} aria-hidden="true"></div>

            <div class="relative">
              <div class="mb-1 flex items-center gap-2">
                <span class="rounded-full bg-ctp-surface1 px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-wider text-ctp-subtext0">
                  {project.role}
                </span>
              </div>

              <h2 class="mb-2 text-lg font-bold text-white transition-colors group-hover:text-gradient">
                {project.name}
              </h2>

              <p class="mb-5 text-sm leading-relaxed text-ctp-subtext0">
                {project.description}
              </p>

              <div class="mb-4 flex flex-wrap gap-1.5">
                {project.tech.map((t) => (
                  <span class="rounded-full border border-white/5 bg-ctp-surface1/80 px-2.5 py-0.5 text-[11px] font-medium text-ctp-subtext0">
                    {t}
                  </span>
                ))}
              </div>

              <div class="flex flex-wrap items-center gap-3 text-xs text-ctp-overlay1">
                <span class="flex items-center gap-1.5">
                  <span class={`h-2.5 w-2.5 rounded-full ${langStyle.dot} shadow-sm shadow-current`} />
                  {project.language}
                </span>
              </div>

              <div class="mt-4 flex items-center gap-3">
                <a
                  href={project.mockUrl}
                  class="relative z-10 inline-flex items-center gap-1.5 rounded-full bg-gradient-to-r from-coral-400/20 to-amber-500/20 px-3.5 py-1.5 text-xs font-semibold text-white transition-all hover:from-coral-400/30 hover:to-amber-500/30"
                >
                  <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                  View Mock
                </a>
                {project.github && (
                  <a
                    href={project.github}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="relative z-10 inline-flex items-center gap-1.5 rounded-full bg-ctp-surface1/80 px-3.5 py-1.5 text-xs font-medium text-ctp-subtext0 transition-colors hover:text-white"
                  >
                    <svg class="h-3.5 w-3.5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                      <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd" />
                    </svg>
                    Source
                  </a>
                )}
              </div>
            </div>
          </article>
        );
      })}
    </div>
  </section>
</MainLayout>
