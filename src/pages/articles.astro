---
import { getCollection } from 'astro:content';
import MainLayout from '../layouts/MainLayout.astro';

const articles = await getCollection('articles', ({ data }) => !data.draft);
const sortedArticles = articles.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<MainLayout title="Articles | Steve Frost" description="Technical articles and blog posts by Steve Frost.">
  <section class="pb-8">
    <h1 class="mb-8 text-3xl font-extrabold tracking-tight sm:text-4xl">
      <span class="relative inline-block">
        <span class="text-gradient">articles</span>
        <svg class="absolute -bottom-3 left-0 w-full text-coral-400/40" viewBox="0 0 100 10" fill="none" preserveAspectRatio="none" aria-hidden="true">
          <path d="M0 5c8.33-6 16.67 6 25 0s16.67 6 25 0 16.67 6 25 0 16.67 6 25 0" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
        </svg>
      </span>
    </h1>
    <p class="mb-12 max-w-2xl text-ctp-subtext0">
      Thoughts on web development, tools, and the craft of building software.
    </p>

    <ul class="space-y-1">
      {sortedArticles.map((article, i) => (
        <li style={`animation: slideUp 0.4s ease-out ${i * 60}ms both;`}>
          <a
            href={`/articles/${article.slug}`}
            class="group flex flex-col gap-1 rounded-xl border border-transparent px-3 py-4 transition-all hover:border-white/5 hover:bg-ctp-surface0/60 sm:flex-row sm:items-baseline sm:justify-between sm:gap-4 sm:px-5"
          >
              <h2 class="text-lg font-medium text-ctp-text transition-colors group-hover:text-gradient">
              {article.data.title}
            </h2>
            <time class="shrink-0 text-sm text-ctp-overlay0" datetime={article.data.date.toISOString()}>
              {article.data.date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
              })}
            </time>
          </a>
        </li>
      ))}
    </ul>
  </section>
</MainLayout>
