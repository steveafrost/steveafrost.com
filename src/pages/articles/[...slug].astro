---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';
import Bio from '../../components/Bio.astro';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  return articles.map((article) => ({
    params: { slug: article.slug },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await article.render();
---

<MainLayout title={`${article.data.title} | Steve Frost`}>
  <article class="py-8">
    <header class="mb-10">
      <h1 class="text-3xl font-bold tracking-tight sm:text-4xl text-gradient">{article.data.title}</h1>
      <svg class="mt-1.5 mb-4 text-coral-400/40" width="160" height="16" viewBox="0 0 100 10" fill="none" preserveAspectRatio="none" aria-hidden="true">
        <path d="M0 5c8.33-6 16.67 6 25 0s16.67 6 25 0 16.67 6 25 0 16.67 6 25 0" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
      </svg>
      <time class="text-sm text-ctp-overlay1" datetime={article.data.date.toISOString()}>
        {article.data.date.toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        })}
      </time>
    </header>

    <div class="prose prose-invert prose-zinc max-w-none prose-headings:font-semibold prose-headings:tracking-tight prose-a:text-brand-400 prose-a:no-underline hover:prose-a:underline prose-pre:rounded-lg prose-pre:bg-ctp-mantle prose-pre:border prose-pre:border-ctp-surface0 prose-img:rounded-lg">
      <Content />
    </div>

    <hr class="my-12 border-ctp-surface0" />
    <Bio />
  </article>
</MainLayout>
